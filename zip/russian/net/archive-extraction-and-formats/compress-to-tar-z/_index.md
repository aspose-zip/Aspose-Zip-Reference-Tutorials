---
date: 2026-02-15
description: Узнайте, как добавлять файлы в tar и сжимать их в TarZ с помощью Aspose.Zip
  для .NET – пошаговое руководство по эффективной работе с файлами в .NET.
linktitle: Compressing to TarZ
second_title: Aspose.Zip .NET API for Files Compression & Archiving
title: Добавить файлы в tar и сжать в TarZ с помощью Aspose.Zip для .NET
url: /ru/net/archive-extraction-and-formats/compress-to-tar-z/
weight: 15
---

{{< blocks/products/pf/main-wrap-class >}}
{{< blocks/products/pf/main-container >}}
{{< blocks/products/pf/tutorial-page-section >}}

# Добавить файлы в tar и сжать в TarZ с помощью Aspose.Zip для .NET

## Введение

## Быстрые ответы
- **Какая библиотека обрабатывает создание tar?** Aspose.Zip for .NET  
- **Сколько строк кода?** Около 15 строк (не считая комментариев)  
- **Нужна ли лицензия для тестирования?** Доступна бесплатная пробная версия; лицензия требуется для продакшн.  
- **Поддерживаемые версии .NET?** .NET Framework 4.5+, .NET Core 3.1+, .NET 5/6+  
- **Можно ли сжимать папки, а не только файлы?** Да — можно добавить целые каталоги с помощью цикла.

## Что такое **add files to tar**?
Добавление файлов в tar‑архив упаковывает их в один несжатый контейнер, сохраняющий структуру каталогов и метаданные файлов. Tar — классический формат Unix и служит основой для многих процессов сжатия, включая формат TarZ, используемый в этом руководстве.

## Почему добавлять файлы в tar перед сжатием в TarZ?
- **Переносимость** — tar‑архив работает на разных платформах без необходимости управлять отдельными файлами.  
- **Скорость** — создание tar‑контейнера быстро; последующее Z‑сжатие сосредоточено только на уменьшении размера.  
- **Совместимость** — многие устаревшие инструменты ожидают `.tar` перед применением gzip‑подобного сжатия, что и обеспечивает `.tar.z`.  

### Почему это важно для разработчиков .NET
Использование tar‑контейнера позволяет держать ваш .NET‑код простым и детерминированным. Вы можете генерировать архив в памяти, передавать его напрямую в ответе или сохранять на диск без необходимости работать с временными zip‑файлами. Этот подход особенно полезен для конвейеров сборки, агрегации логов или когда нужно отправить набор конфигурационных файлов в сервис на базе Linux.

## Требования

Прежде чем перейти к коду, убедитесь, что у вас есть:
- **Aspose.Zip for .NET** установлен. Скачайте его с официального сайта [здесь](https://releases.aspose.com/zip/net/).  
- Папка на вашем компьютере, содержащая файлы, которые вы хотите заархивировать. Замените путь‑заполнитель на ваш реальный каталог.

## Импорт пространств имён

Добавьте необходимые директивы `using` в начало вашего C#‑файла:

```csharp
using System;
using Aspose.Zip.Tar;
```

> **Совет:** Используйте `Path.Combine`, если нужно динамически формировать пути; это предотвращает отсутствие разделителей пути на разных ОС.

## Пошаговое руководство

### Шаг 1: Определите каталог документов

```csharp
string dataDir = "Your Document Directory";
```

> **Почему этот шаг важен:** `dataDir` служит базовым расположением для каждого добавляемого файла. Хранение его в одной переменной упрощает поддержку кода и повторное использование в нескольких архивах.

### Шаг 2: Создайте Tar‑архив и добавьте файлы

#### 2.1: Создайте экземпляр Tar‑архива

```csharp
using (TarArchive archive = new TarArchive())
{
    // Your code for creating the Tar archive goes here
}
```

> Блок `using` гарантирует правильное освобождение объекта `TarArchive`, освобождая любые файловые дескрипторы или буферы памяти.

#### 2.2: Добавьте файлы в архив  

Внутри блока `using` добавьте каждый файл, который хотите включить:

```csharp
archive.CreateEntry("alice29.txt", dataDir + "alice29.txt");
archive.CreateEntry("lcet10.txt", dataDir + "lcet10.txt");
```

Вы можете повторять `CreateEntry` столько раз, сколько нужно, либо пройтись по каталогу в цикле, чтобы добавить их программно. Например, цикл `foreach (var file in Directory.GetFiles(dataDir))` позволит обработать произвольное количество файлов, сохраняя их относительные пути.

#### 2.3: Сохраните сжатый TarZ‑файл  

После добавления всех записей сожмите tar‑архив в формат `.tar.z`:

```csharp
archive.SaveZCompressed(dataDir + "archive.tar.z");
```

Получившийся файл `archive.tar.z` будет находиться в той же папке, которую вы указали в `dataDir`. Теперь вы можете отправлять этот единый сжатый пакет в любую систему, поддерживающую TarZ.

## Распространённые проблемы и решения

| Проблема | Причина | Решение |
|----------|---------|---------|
| **Файл не найден** | Неправильный путь или отсутствует расширение файла | Убедитесь, что `dataDir` заканчивается разделителем пути и имена файлов корректны. |
| **Доступ запрещён** | Недостаточные права доступа к целевой папке | Запустите приложение с необходимыми правами или выберите папку с правом записи. |
| **Сжатый файл больше ожидаемого** | Исходные файлы уже сжаты (например, изображения, видео) | TarZ лучше работает с текстовыми или лог‑файлами; рассмотрите возможность оставить уже сжатые файлы без изменений. |

### Распространённые подводные камни, на которые стоит обратить внимание
- **Отсутствует завершающий слеш** — если `dataDir` не заканчивается на `\` или `/`, конкатенация строк создаст неверный путь.
- **Большие каталоги** — добавление тысяч файлов может потреблять много памяти; рассмотрите потоковую запись записей или использование перегрузки `TarArchive`, которая пишет напрямую в файловый поток.
- **Проблемы с кодировкой** — имена файлов, не содержащие ASCII, могут требовать явного указания кодировки; Aspose.Zip по умолчанию использует UTF‑8, но проверьте это на целевой платформе.

## Часто задаваемые вопросы

**В: Можно ли сжимать целые папки с помощью Aspose.Zip for .NET?**  
О: Конечно. Используйте цикл `Directory.GetFiles` и вызывайте `CreateEntry` для каждого файла, сохраняя относительные пути.

**В: Доступна ли пробная версия Aspose.Zip for .NET?**  
О: Да, вы можете ознакомиться с возможностями Aspose.Zip for .NET, скачав бесплатную пробную версию [здесь](https://releases.aspose.com/).

**В: Где можно найти полную документацию по Aspose.Zip for .NET?**  
О: Документация доступна [здесь](https://reference.aspose.com/zip/net/), предоставляя подробную информацию о функциях библиотеки и её использовании.

**В: Как получить поддержку по Aspose.Zip for .NET?**  
О: Посетите [форум Aspose.Zip](https://forum.aspose.com/c/zip/37), чтобы получить помощь, поделиться опытом и связаться с сообществом.

**В: Можно ли получить временную лицензию для Aspose.Zip for .NET?**  
О: Да, если нужна временная лицензия, её можно получить [здесь](https://purchase.aspose.com/temporary-license/).

## Заключение

Теперь вы знаете, как **add files to tar** и сжать результат в архив TarZ с помощью Aspose.Zip for .NET. Этот подход даёт вам чистый, переносимый пакет, который легко передать, сохранить или дальше обработать. Не стесняйтесь адаптировать фрагмент к пакетной обработке каталогов, интегрировать его в конвейеры сборки или комбинировать с другими компонентами Aspose для более сложных рабочих процессов с документами.

---

**Последнее обновление:** 2026-02-15  
**Тестировано с:** Aspose.Zip for .NET 24.11  
**Автор:** Aspose 

{{< /blocks/products/pf/tutorial-page-section >}}

{{< /blocks/products/pf/main-container >}}
{{< /blocks/products/pf/main-wrap-class >}}

{{< blocks/products/products-backtop-button >}}